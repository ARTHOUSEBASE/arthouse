<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ARTHOUSE — Web3 Creator Network | Base Mainnet + XMTP Agents</title>
    
    <!-- XMTP Dependencies -->
    <script type="module">
        import { Client } from 'https://unpkg.com/@xmtp/xmtp-js@11.3.12/dist/index.js';
        window.XMTPClient = Client;
    </script>
    
    <!-- Ethers.js -->
    <script src="https://cdn.jsdelivr.net/npm/ethers@6.9.0/dist/ethers.umd.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@100;300;400;500;700&family=Space+Grotesk:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --base-blue: #0052FF;
            --agent-green: #10B981;
        }
        
        * {
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
        }
        
        body {
            font-family: 'JetBrains Mono', monospace;
            background: #ffffff;
            color: #000000;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }
        
        .font-display {
            font-family: 'Space Grotesk', sans-serif;
        }
        
        .grid-bg {
            background-image: 
                linear-gradient(rgba(0,0,0,0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0,0,0,0.03) 1px, transparent 1px);
            background-size: 30px 30px;
        }
        
        @media (min-width: 768px) {
            .grid-bg { background-size: 50px 50px; }
        }
        
        .code-comment { color: #666; font-style: italic; }
        .code-keyword { font-weight: 700; }
        .code-string { border-bottom: 1px solid #000; }
        
        .ascii-box {
            border: 1px solid #000;
            position: relative;
        }
        
        .ascii-box::before {
            content: '+';
            position: absolute;
            top: -5px;
            left: -5px;
            background: #fff;
            padding: 0 2px;
            font-size: 10px;
            line-height: 1;
        }
        
        .ascii-box::after {
            content: '+';
            position: absolute;
            bottom: -5px;
            right: -5px;
            background: #fff;
            padding: 0 2px;
            font-size: 10px;
            line-height: 1;
        }
        
        .touch-target {
            min-height: 44px;
            min-width: 44px;
        }
        
        @media (hover: hover) {
            .hover-fill {
                position: relative;
                overflow: hidden;
                transition: color 0.3s ease;
            }
            
            .hover-fill::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: #000;
                transition: left 0.3s ease;
                z-index: -1;
            }
            
            .hover-fill:hover::before { left: 0; }
            .hover-fill:hover { color: #fff; }
        }
        
        @media (hover: none) {
            .hover-fill:active {
                background: #000;
                color: #fff;
            }
        }
        
        .reveal {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }
        
        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }
        
        .hub-tab.active {
            background: #000;
            color: #fff;
        }
        
        .network-card {
            transition: all 0.2s ease;
        }
        
        @media (hover: hover) {
            .network-card:hover {
                transform: translateY(-4px);
                box-shadow: 4px 4px 0px 0px #000;
            }
        }
        
        .network-card:active {
            transform: scale(0.98);
        }
        
        .terminal-cursor::after {
            content: '_';
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        .mobile-menu {
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }
        
        .mobile-menu.open {
            transform: translateX(0);
        }
        
        .horizontal-scroll {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }
        
        .horizontal-scroll::-webkit-scrollbar {
            display: none;
        }
        
        .sticky-header {
            position: sticky;
            top: 0;
            z-index: 50;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        
        @media (max-width: 640px) {
            .text-mobile-hero {
                font-size: 2.5rem;
                line-height: 1;
            }
        }
        
        .no-select {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        @keyframes spin-slow {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .animate-spin-slow {
            animation: spin-slow 20s linear infinite;
        }
        
        .safe-area-top {
            padding-top: env(safe-area-inset-top);
        }
        
        .safe-area-bottom {
            padding-bottom: env(safe-area-inset-bottom);
        }
        
        /* XMTP Chat Styles */
        .chat-message {
            max-width: 80%;
            margin-bottom: 12px;
            padding: 12px 16px;
            border-radius: 12px;
            font-size: 14px;
            line-height: 1.4;
        }
        
        .chat-message.sent {
            background: #000;
            color: #fff;
            margin-left: auto;
            border-bottom-right-radius: 4px;
        }
        
        .chat-message.received {
            background: #f3f4f6;
            color: #000;
            margin-right: auto;
            border-bottom-left-radius: 4px;
        }
        
        .chat-message.agent {
            background: #0052FF;
            color: #fff;
            margin-right: auto;
            border-bottom-left-radius: 4px;
        }
        
        .chat-message .timestamp {
            font-size: 10px;
            opacity: 0.6;
            margin-top: 4px;
        }
        
        .chat-message .sender {
            font-size: 11px;
            font-weight: bold;
            margin-bottom: 4px;
            opacity: 0.9;
        }
        
        .base-indicator {
            background: #0052FF;
            color: white;
            font-size: 10px;
            padding: 2px 8px;
            border-radius: 12px;
            font-weight: bold;
        }
        
        .agent-indicator {
            background: #10B981;
            color: white;
            font-size: 9px;
            padding: 2px 6px;
            border-radius: 8px;
            margin-left: 6px;
        }
        
        .wallet-connected {
            background: #10B981 !important;
            color: white !important;
            border-color: #10B981 !important;
        }
        
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #000;
            color: #fff;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            z-index: 100;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
        }
        
        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }
        
        .spinner {
            border: 2px solid #f3f3f3;
            border-top: 2px solid #000;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Agent-specific styles */
        .agent-card {
            border-left: 3px solid #0052FF;
        }
        
        .agent-status {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #10B981;
            display: inline-block;
            margin-right: 6px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body class="grid-bg">

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <!-- Mobile Navigation -->
    <nav class="fixed top-0 w-full bg-white/95 border-b border-black/10 z-50 safe-area-top">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 py-3 sm:py-4 flex justify-between items-center">
            <div class="flex items-center gap-2">
                <span class="text-[10px] sm:text-xs code-comment">//</span>
                <span class="font-display text-xl sm:text-2xl font-bold tracking-tighter">ARTHOUSE</span>
                <span class="base-indicator">BASE</span>
                <span class="text-[10px] sm:text-xs px-2 py-0.5 border border-black/20 rounded-full">mainnet</span>
            </div>
            
            <!-- Desktop Menu -->
            <div class="hidden md:flex gap-8 text-sm items-center">
                <a href="#manifesto" class="hover:underline decoration-2 underline-offset-4 touch-target flex items-center"><span class="code-keyword">class</span>&nbsp;About</a>
                <a href="#hubs" class="hover:underline decoration-2 underline-offset-4 touch-target flex items-center"><span class="code-keyword">def</span>&nbsp;Hubs()</a>
                <a href="#agents" class="hover:underline decoration-2 underline-offset-4 touch-target flex items-center"><span class="code-keyword">agent</span>&nbsp;AI</a>
                <a href="#messaging" class="hover:underline decoration-2 underline-offset-4 touch-target flex items-center"><span class="code-keyword">msg</span>&nbsp;XMTP</a>
                <button id="connectWalletBtn" onclick="connectWallet()" class="ascii-box px-4 py-2 text-xs hover-fill touch-target flex items-center justify-center gap-2">
                    <span>connect_wallet()</span>
                </button>
            </div>

            <!-- Mobile Menu Button -->
            <button id="menuBtn" class="md:hidden border border-black px-3 py-2 text-xs active:bg-black active:text-white transition-colors touch-target no-select">
                [menu]
            </button>
        </div>
    </nav>

    <!-- Mobile Menu Overlay -->
    <div id="mobileMenu" class="mobile-menu fixed inset-0 bg-white z-40 pt-20 px-6 md:hidden">
        <div class="flex flex-col gap-4 text-lg">
            <a href="#manifesto" class="mobile-link border-b border-black/10 py-4 flex justify-between items-center touch-target">
                <span><span class="code-comment">#</span> About</span>
                <span>→</span>
            </a>
            <a href="#hubs" class="mobile-link border-b border-black/10 py-4 flex justify-between items-center touch-target">
                <span><span class="code-comment">#</span> Hubs</span>
                <span>→</span>
            </a>
            <a href="#agents" class="mobile-link border-b border-black/10 py-4 flex justify-between items-center touch-target">
                <span><span class="code-comment">#</span> AI Agents</span>
                <span>→</span>
            </a>
            <a href="#messaging" class="mobile-link border-b border-black/10 py-4 flex justify-between items-center touch-target">
                <span><span class="code-comment">#</span> XMTP Messaging</span>
                <span>→</span>
            </a>
            <button onclick="connectWallet()" class="mobile-link border-b border-black/10 py-4 flex justify-between items-center touch-target text-left">
                <span><span class="code-comment">#</span> Connect Wallet</span>
                <span>→</span>
            </button>
        </div>
        <div class="absolute bottom-8 left-6 right-6">
            <div class="ascii-box p-4 text-center text-xs code-comment">
                ARTHOUSE.network v1.0<br>
                Base Mainnet + XMTP Agents<br>
                Production Ready
            </div>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="min-h-screen flex items-center justify-center relative pt-16 sm:pt-20 px-4">
        <div class="max-w-6xl mx-auto w-full">
            <div class="grid md:grid-cols-12 gap-8 items-center">
                <div class="md:col-span-7 space-y-6 sm:space-y-8">
                    <div class="space-y-1 text-[10px] sm:text-xs code-comment reveal">
                        <p>// ARTHOUSE.network</p>
                        <p>// protocol: web3_creative_bridge</p>
                        <p>// network: Base Mainnet (chainId: 8453)</p>
                        <p>// messaging: XMTP v3 + AI Agents</p>
                        <p>// status: production</p>
                    </div>

                    <h1 class="font-display text-4xl sm:text-5xl md:text-7xl font-bold leading-none tracking-tighter reveal text-mobile-hero" style="transition-delay: 0.1s">
                        AI-POWERED<br>
                        <span class="terminal-cursor">WEB3_CREATORS</span>
                    </h1>

                    <div class="max-w-xl space-y-3 sm:space-y-4 reveal" style="transition-delay: 0.2s">
                        <p class="text-base sm:text-lg md:text-xl leading-relaxed border-l-2 border-black pl-4 sm:pl-6 code-keyword">
                            The decentralized network matching quality content creators with ambitious Web3 projects. Powered by XMTP AI agents on Base.
                        </p>
                        <p class="pl-4 sm:pl-6 text-xs sm:text-sm code-comment">
                            No middlemen. Smart contracts. Verified talent. AI-assisted matching.
                        </p>
                    </div>

                    <div class="flex flex-col gap-3 sm:gap-4 pt-2 sm:pt-4 reveal" style="transition-delay: 0.3s">
                        <a href="#creatorhub" class="ascii-box px-6 sm:px-8 py-3 sm:py-4 text-center hover-fill transition-all group touch-target">
                            <span class="block text-[10px] sm:text-xs code-comment mb-1">for creators</span>
                            <span class="font-display font-bold text-base sm:text-lg">JOIN_CREATORHUB</span>
                        </a>
                        <a href="#projecthub" class="ascii-box px-6 sm:px-8 py-3 sm:py-4 text-center hover:bg-black hover:text-white transition-all group touch-target">
                            <span class="block text-[10px] sm:text-xs code-comment group-hover:text-white/50 mb-1">for projects</span>
                            <span class="font-display font-bold text-base sm:text-lg">JOIN_PROJECTHUB</span>
                        </a>
                    </div>
                </div>

                <div class="hidden sm:block md:col-span-5 reveal" style="transition-delay: 0.4s">
                    <div class="ascii-box p-4 sm:p-8 aspect-square flex flex-col justify-between bg-white max-w-sm mx-auto">
                        <div class="flex justify-between text-[10px] sm:text-xs code-comment">
                            <span>network_visualization</span>
                            <span>.svg</span>
                        </div>
                        <div class="flex-1 flex items-center justify-center p-4">
                            <svg viewBox="0 0 200 200" class="w-full h-full animate-spin-slow">
                                <circle cx="100" cy="100" r="80" fill="none" stroke="#0052FF" stroke-width="0.5" stroke-dasharray="4 4"/>
                                <circle cx="100" cy="100" r="50" fill="none" stroke="#000" stroke-width="1"/>
                                <circle cx="100" cy="20" r="6" fill="#0052FF"/>
                                <circle cx="180" cy="100" r="6" fill="#10B981"/>
                                <circle cx="100" cy="180" r="6" fill="#0052FF"/>
                                <circle cx="20" cy="100" r="6" fill="#10B981"/>
                                <line x1="100" y1="20" x2="180" y2="100" stroke="#0052FF" stroke-width="0.5"/>
                                <line x1="180" y1="100" x2="100" y2="180" stroke="#0052FF" stroke-width="0.5"/>
                                <line x1="100" y1="180" x2="20" y2="100" stroke="#0052FF" stroke-width="0.5"/>
                                <line x1="20" y1="100" x2="100" y2="20" stroke="#0052FF" stroke-width="0.5"/>
                                <text x="100" y="100" text-anchor="middle" font-family="JetBrains Mono" font-size="8" fill="#0052FF">XMTP AGENTS</text>
                                <text x="100" y="115" text-anchor="middle" font-family="JetBrains Mono" font-size="10" fill="#000">BASE MAINNET</text>
                            </svg>
                        </div>
                        <div class="text-[10px] sm:text-xs code-comment">
                            nodes: 2,847 | projects: 156 | agents: 12 | xmtp: active
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- AI Agents Section -->
    <section id="agents" class="py-16 sm:py-32 border-t border-black/10 bg-neutral-50 px-4">
        <div class="max-w-6xl mx-auto">
            <div class="grid md:grid-cols-12 gap-8 sm:gap-12">
                <div class="md:col-span-4 reveal">
                    <h2 class="font-display text-2xl sm:text-3xl font-bold mb-4">
                        <span class="code-comment">#</span> XMTP_AGENTS
                    </h2>
                    <div class="text-[10px] sm:text-xs code-comment space-y-1 mb-6">
                        <p>/*</p>
                        <p>&nbsp;* AI-powered assistants</p>
                        <p>&nbsp;* Running on Base via XMTP</p>
                        <p>&nbsp;* 24/7 automated matching</p>
                        <p>&nbsp;*/</p>
                    </div>
                    
                    <div class="ascii-box p-4 bg-white mb-4">
                        <h3 class="font-bold text-sm mb-2 code-keyword">Agent Status</h3>
                        <div class="flex items-center gap-2 text-xs mb-2">
                            <span class="agent-status"></span>
                            <span>Matching Agent: Online</span>
                        </div>
                        <div class="flex items-center gap-2 text-xs mb-2">
                            <span class="agent-status" style="background: #10B981;"></span>
                            <span>Support Agent: Online</span>
                        </div>
                        <div class="text-[10px] code-comment mt-2">
                            Last ping: <span id="lastAgentPing">Just now</span>
                        </div>
                    </div>
                    
                    <button onclick="startAgentChat()" class="w-full ascii-box px-4 py-3 text-xs hover-fill touch-target">
                        Chat with Matching Agent
                    </button>
                </div>

                <div class="md:col-span-8 reveal">
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <!-- Agent Cards -->
                        <div class="network-card ascii-box p-4 sm:p-6 bg-white agent-card reveal touch-target cursor-pointer" onclick="startAgentChat('matching')">
                            <div class="flex justify-between items-start mb-4">
                                <span class="text-[10px] code-comment">AGENT_01</span>
                                <span class="agent-indicator">AI</span>
                            </div>
                            <h3 class="font-display font-bold text-lg mb-2">Creator Matcher</h3>
                            <p class="text-xs code-comment mb-3">AI agent that matches creators with projects based on skills, portfolio, and availability.</p>
                            <div class="flex gap-2 text-[10px]">
                                <span class="px-2 py-1 bg-[#0052FF] text-white rounded">Active</span>
                                <span class="px-2 py-1 border border-black/20 rounded">Base</span>
                            </div>
                        </div>

                        <div class="network-card ascii-box p-4 sm:p-6 bg-white agent-card reveal touch-target cursor-pointer" style="transition-delay: 0.1s" onclick="startAgentChat('support')">
                            <div class="flex justify-between items-start mb-4">
                                <span class="text-[10px] code-comment">AGENT_02</span>
                                <span class="agent-indicator">AI</span>
                            </div>
                            <h3 class="font-display font-bold text-lg mb-2">Project Support</h3>
                            <p class="text-xs code-comment mb-3">Handles project inquiries, escrow questions, and dispute resolution automatically.</p>
                            <div class="flex gap-2 text-[10px]">
                                <span class="px-2 py-1 bg-[#0052FF] text-white rounded">Active</span>
                                <span class="px-2 py-1 border border-black/20 rounded">Base</span>
                            </div>
                        </div>

                        <div class="network-card ascii-box p-4 sm:p-6 bg-white agent-card reveal touch-target cursor-pointer" style="transition-delay: 0.2s" onclick="startAgentChat('payments')">
                            <div class="flex justify-between items-start mb-4">
                                <span class="text-[10px] code-comment">AGENT_03</span>
                                <span class="agent-indicator">AI</span>
                            </div>
                            <h3 class="font-display font-bold text-lg mb-2">Payment Agent</h3>
                            <p class="text-xs code-comment mb-3">Manages milestone payments, ART token transfers, and escrow releases via x402 protocol.</p>
                            <div class="flex gap-2 text-[10px]">
                                <span class="px-2 py-1 bg-[#0052FF] text-white rounded">Active</span>
                                <span class="px-2 py-1 border border-black/20 rounded">x402</span>
                            </div>
                        </div>

                        <div class="network-card ascii-box p-4 sm:p-6 bg-white agent-card reveal touch-target cursor-pointer" style="transition-delay: 0.3s" onclick="startAgentChat('analytics')">
                            <div class="flex justify-between items-start mb-4">
                                <span class="text-[10px] code-comment">AGENT_04</span>
                                <span class="agent-indicator">AI</span>
                            </div>
                            <h3 class="font-display font-bold text-lg mb-2">Analytics Agent</h3>
                            <p class="text-xs code-comment mb-3">Provides real-time market data, creator stats, and project ROI analysis.</p>
                            <div class="flex gap-2 text-[10px]">
                                <span class="px-2 py-1 bg-[#0052FF] text-white rounded">Active</span>
                                <span class="px-2 py-1 border border-black/20 rounded">Data</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- XMTP Messaging Section -->
    <section id="messaging" class="py-16 sm:py-32 border-t border-black/10 px-4">
        <div class="max-w-6xl mx-auto">
            <div class="grid md:grid-cols-12 gap-8 sm:gap-12">
                <div class="md:col-span-4 reveal">
                    <h2 class="font-display text-2xl sm:text-3xl font-bold mb-4">
                        <span class="code-comment">#</span> XMTP_MESSAGING
                    </h2>
                    <div class="text-[10px] sm:text-xs code-comment space-y-1 mb-6">
                        <p>/*</p>
                        <p>&nbsp;* Wallet-to-wallet messaging</p>
                        <p>&nbsp;* Base Mainnet integration</p>
                        <p>&nbsp;* AI agent compatible</p>
                        <p>&nbsp;*/</p>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="ascii-box p-4 bg-white">
                            <h3 class="font-bold text-sm mb-2 code-keyword">Connection Status</h3>
                            <div id="walletStatus" class="text-xs code-comment">
                                Wallet: Not connected
                            </div>
                            <div id="xmtpStatus" class="text-xs code-comment mt-1">
                                XMTP: Disconnected
                            </div>
                            <div id="networkStatus" class="text-xs code-comment mt-1">
                                Network: --
                            </div>
                            <div id="agentStatus" class="text-xs code-comment mt-1">
                                Agent Mode: Inactive
                            </div>
                        </div>
                        
                        <button onclick="initXMTP()" id="initXmtpBtn" class="w-full ascii-box px-4 py-3 text-xs hover-fill touch-target disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            Initialize XMTP Client
                        </button>
                        
                        <button onclick="startNewConversation()" id="newConvBtn" class="w-full ascii-box px-4 py-3 text-xs hover-fill touch-target disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            New Conversation
                        </button>
                        
                        <button onclick="toggleAgentMode()" id="agentModeBtn" class="w-full ascii-box px-4 py-3 text-xs hover-fill touch-target disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            Enable Agent Mode
                        </button>
                    </div>
                </div>

                <div class="md:col-span-8 reveal">
                    <div class="ascii-box bg-white h-[600px] flex flex-col">
                        <div class="border-b border-black/10 p-4 flex justify-between items-center">
                            <div>
                                <h3 class="font-display font-bold">XMTP Chat</h3>
                                <p class="text-xs code-comment">Base Mainnet • E2E Encrypted • AI Ready</p>
                            </div>
                            <div class="flex gap-2 items-center">
                                <span id="connectionIndicator" class="w-2 h-2 rounded-full bg-red-500"></span>
                                <span id="agentModeIndicator" class="hidden px-2 py-1 bg-[#0052FF] text-white text-[10px] rounded">AGENT</span>
                            </div>
                        </div>
                        
                        <div id="conversationsList" class="border-b border-black/10 p-4 hidden">
                            <h4 class="text-xs font-bold mb-2 code-keyword">Conversations</h4>
                            <div id="conversationsContainer" class="space-y-2 max-h-32 overflow-y-auto">
                                <p class="text-xs code-comment">No conversations yet</p>
                            </div>
                        </div>
                        
                        <div id="messagesContainer" class="flex-1 overflow-y-auto p-4 space-y-2 bg-neutral-50">
                            <div class="text-center text-xs code-comment mt-8">
                                <p>Connect wallet to start messaging</p>
                                <p class="mt-2">Compatible with Base App, Converse, Coinbase Wallet</p>
                            </div>
                        </div>
                        
                        <div class="border-t border-black/10 p-4">
                            <div class="flex gap-2">
                                <input 
                                    type="text" 
                                    id="messageInput" 
                                    placeholder="Enter message or agent command..." 
                                    class="flex-1 border border-black/20 px-4 py-2 text-sm focus:outline-none focus:border-black"
                                    disabled
                                >
                                <button 
                                    onclick="sendMessage()" 
                                    id="sendBtn"
                                    class="ascii-box px-4 py-2 text-xs hover-fill disabled:opacity-50"
                                    disabled
                                >
                                    Send
                                </button>
                            </div>
                            <div class="mt-2 flex justify-between items-center text-[10px] code-comment">
                                <span>Try: "match me with designers" or "check my ART balance"</span>
                                <span id="messageCount">0 messages</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Token Section -->
    <section id="token" class="py-16 sm:py-32 border-t border-black/10 bg-neutral-50 px-4">
        <div class="max-w-5xl mx-auto">
            <div class="grid md:grid-cols-12 gap-8 sm:gap-12">
                <div class="md:col-span-4 reveal">
                    <h2 class="font-display text-2xl sm:text-3xl font-bold mb-4">
                        <span class="code-comment">#</span> ART_TOKEN
                    </h2>
                    <div class="text-[10px] sm:text-xs code-comment space-y-1 mb-6">
                        <p>/*</p>
                        <p>&nbsp;* ERC20 on Base Mainnet</p>
                        <p>&nbsp;* 3% fee (burn + treasury + agent)</p>
                        <p>&nbsp;* AI agent rewards</p>
                        <p>&nbsp;*/</p>
                    </div>
                </div>

                <div class="md:col-span-8 space-y-6 reveal">
                    <div class="ascii-box bg-white p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="font-display font-bold text-xl">ART Token Info</h3>
                            <span class="base-indicator">BASE</span>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4 text-sm mb-6">
                            <div>
                                <span class="code-comment block text-xs">Contract</span>
                                <span class="font-mono text-xs break-all" id="tokenAddress">Deploy to see address</span>
                            </div>
                            <div>
                                <span class="code-comment block text-xs">Total Supply</span>
                                <span>100,000,000 ART</span>
                            </div>
                            <div>
                                <span class="code-comment block text-xs">Fee Structure</span>
                                <span>1% Burn + 1% Treasury + 1% Agents</span>
                            </div>
                            <div>
                                <span class="code-comment block text-xs">Your Balance</span>
                                <span id="userTokenBalance">Connect wallet to view</span>
                            </div>
                        </div>
                        
                        <div class="border-t border-black/10 pt-4">
                            <h4 class="font-bold text-sm mb-2">Token Actions</h4>
                            <div class="flex gap-2 flex-wrap">
                                <button onclick="checkArtBalance()" class="ascii-box px-4 py-2 text-xs hover-fill touch-target disabled:opacity-50" id="checkBalanceBtn" disabled>
                                    Check Balance
                                </button>
                                <button onclick="transferArt()" class="ascii-box px-4 py-2 text-xs hover-fill touch-target disabled:opacity-50" id="transferBtn" disabled>
                                    Transfer ART
                                </button>
                                <button onclick="claimAgentRewards()" class="ascii-box px-4 py-2 text-xs hover-fill touch-target disabled:opacity-50" id="claimRewardsBtn" disabled>
                                    Claim Rewards
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Rest of sections (Manifesto, Hubs, Network, Stats, CTA) remain similar -->
    <!-- ... [Previous sections preserved] ... -->

    <script>
        // Global Variables
        let provider = null;
        let signer = null;
        let walletAddress = null;
        let xmtpClient = null;
        let currentConversation = null;
        let conversations = new Map();
        let messageHistory = [];
        let agentMode = false;
        let artTokenContract = null;

        // Base Mainnet Configuration
        const BASE_MAINNET = {
            chainId: '0x2105',
            chainName: 'Base Mainnet',
            nativeCurrency: { name: 'Ether', symbol: 'ETH', decimals: 18 },
            rpcUrls: ['https://mainnet.base.org'],
            blockExplorerUrls: ['https://basescan.org']
        };

        // ART Token Configuration (Update after deploy)
        const ART_TOKEN_CONFIG = {
            address: null, // Will be set after deployment
            abi: [
                "function balanceOf(address) view returns (uint256)",
                "function transfer(address, uint256) returns (bool)",
                "function approve(address, uint256) returns (bool)",
                "function allowance(address, address) view returns (uint256)",
                "function getFeeInfo() view returns (uint256, uint256, uint256, uint256, address, address)",
                "function calculateFee(uint256) view returns (uint256, uint256)",
                "function isAgent(address) view returns (bool)",
                "function agentRewards(address) view returns (uint256)",
                "function claimAgentRewards()",
                "event Transfer(address indexed from, address indexed to, uint256 value)"
            ]
        };

        // Agent Configuration
        const AGENT_ADDRESSES = {
            matching: '0x...', // Update with actual agent addresses after deployment
            support: '0x...',
            payments: '0x...',
            analytics: '0x...'
        };

        // Toast Notification
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        // Mobile Menu
        const menuBtn = document.getElementById('menuBtn');
        const mobileMenu = document.getElementById('mobileMenu');
        let isMenuOpen = false;

        function toggleMenu() {
            isMenuOpen = !isMenuOpen;
            mobileMenu.classList.toggle('open', isMenuOpen);
            menuBtn.textContent = isMenuOpen ? '[close]' : '[menu]';
            document.body.style.overflow = isMenuOpen ? 'hidden' : '';
        }

        menuBtn.addEventListener('click', toggleMenu);
        document.querySelectorAll('.mobile-link').forEach(link => {
            link.addEventListener('click', toggleMenu);
        });

        // Scroll Reveal
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('active');
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });

        document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

        // Wallet Connection
        async function connectWallet() {
            try {
                if (!window.ethereum) {
                    showToast('Please install MetaMask or Coinbase Wallet');
                    return;
                }

                const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                if (accounts.length === 0) return;

                provider = new ethers.BrowserProvider(window.ethereum);
                signer = await provider.getSigner();
                walletAddress = await signer.getAddress();

                await checkAndSwitchToBase();
                updateWalletUI();
                
                // Initialize token contract if address is set
                if (ART_TOKEN_CONFIG.address) {
                    artTokenContract = new ethers.Contract(ART_TOKEN_CONFIG.address, ART_TOKEN_CONFIG.abi, signer);
                    updateTokenUI();
                }

                document.getElementById('initXmtpBtn').disabled = false;
                document.getElementById('checkBalanceBtn').disabled = false;
                document.getElementById('transferBtn').disabled = false;
                document.getElementById('claimRewardsBtn').disabled = false;

                showToast(`Connected: ${walletAddress.slice(0, 6)}...${walletAddress.slice(-4)}`);

            } catch (error) {
                console.error('Connection error:', error);
                showToast('Connection failed: ' + error.message);
            }
        }

        async function checkAndSwitchToBase() {
            try {
                const chainId = await window.ethereum.request({ method: 'eth_chainId' });
                if (chainId !== BASE_MAINNET.chainId) {
                    try {
                        await window.ethereum.request({
                            method: 'wallet_switchEthereumChain',
                            params: [{ chainId: BASE_MAINNET.chainId }],
                        });
                    } catch (switchError) {
                        if (switchError.code === 4902) {
                            await window.ethereum.request({
                                method: 'wallet_addEthereumChain',
                                params: [BASE_MAINNET],
                            });
                        }
                    }
                }
                document.getElementById('networkStatus').textContent = 'Network: Base Mainnet';
                document.getElementById('networkStatus').style.color = '#0052FF';
            } catch (error) {
                showToast('Please switch to Base Mainnet');
            }
        }

        function updateWalletUI() {
            const btn = document.getElementById('connectWalletBtn');
            const walletStatus = document.getElementById('walletStatus');
            
            if (walletAddress) {
                btn.innerHTML = `<span>${walletAddress.slice(0, 6)}...${walletAddress.slice(-4)}</span>`;
                btn.classList.add('wallet-connected');
                walletStatus.textContent = `Wallet: ${walletAddress}`;
                walletStatus.style.color = '#10B981';
            }
        }

        // XMTP Initialization
        async function initXMTP() {
            try {
                if (!signer) {
                    showToast('Connect wallet first');
                    return;
                }

                showToast('Initializing XMTP...');
                
                const { Client } = await import('https://unpkg.com/@xmtp/xmtp-js@11.3.12/dist/index.js');
                
                xmtpClient = await Client.create(signer, {
                    env: 'production'
                });

                document.getElementById('xmtpStatus').textContent = 'XMTP: Connected';
                document.getElementById('xmtpStatus').style.color = '#10B981';
                document.getElementById('connectionIndicator').classList.remove('bg-red-500');
                document.getElementById('connectionIndicator').classList.add('bg-green-500');
                document.getElementById('newConvBtn').disabled = false;
                document.getElementById('agentModeBtn').disabled = false;
                document.getElementById('messageInput').disabled = false;
                document.getElementById('sendBtn').disabled = false;

                await loadConversations();
                showToast('XMTP ready on Base!');

            } catch (error) {
                console.error('XMTP error:', error);
                showToast('XMTP init failed: ' + error.message);
            }
        }

        // Agent Mode Toggle
        function toggleAgentMode() {
            agentMode = !agentMode;
            const indicator = document.getElementById('agentModeIndicator');
            const btn = document.getElementById('agentModeBtn');
            const status = document.getElementById('agentStatus');
            
            if (agentMode) {
                indicator.classList.remove('hidden');
                btn.textContent = 'Disable Agent Mode';
                status.textContent = 'Agent Mode: Active';
                status.style.color = '#0052FF';
                showToast('Agent mode enabled - AI will auto-respond');
            } else {
                indicator.classList.add('hidden');
                btn.textContent = 'Enable Agent Mode';
                status.textContent = 'Agent Mode: Inactive';
                status.style.color = '';
            }
        }

        // Start Agent Chat
        function startAgentChat(agentType = 'matching') {
            if (!xmtpClient) {
                showToast('Initialize XMTP first');
                document.getElementById('messaging').scrollIntoView({ behavior: 'smooth' });
                return;
            }
            
            const agentAddress = AGENT_ADDRESSES[agentType];
            if (!agentAddress || agentAddress === '0x...') {
                showToast('Agent not yet deployed - coming soon!');
                return;
            }
            
            startChatWithAddress(agentAddress);
            showToast(`Starting chat with ${agentType} agent...`);
        }

        // Token Functions
        async function checkArtBalance() {
            if (!artTokenContract || !walletAddress) return;
            
            try {
                const balance = await artTokenContract.balanceOf(walletAddress);
                const formatted = ethers.formatUnits(balance, 18);
                document.getElementById('userTokenBalance').textContent = `${formatted} ART`;
                showToast(`Balance: ${formatted} ART`);
            } catch (error) {
                showToast('Error checking balance');
            }
        }

        async function transferArt() {
            if (!artTokenContract) return;
            
            const to = prompt('Enter recipient address:');
            if (!to || !ethers.isAddress(to)) {
                showToast('Invalid address');
                return;
            }
            
            const amount = prompt('Enter amount:');
            if (!amount || isNaN(amount)) {
                showToast('Invalid amount');
                return;
            }
            
            try {
                const parsedAmount = ethers.parseUnits(amount, 18);
                const tx = await artTokenContract.transfer(to, parsedAmount);
                await tx.wait();
                showToast(`Transferred ${amount} ART!`);
                checkArtBalance();
            } catch (error) {
                showToast('Transfer failed: ' + error.message);
            }
        }

        async function claimAgentRewards() {
            if (!artTokenContract) return;
            
            try {
                const tx = await artTokenContract.claimAgentRewards();
                await tx.wait();
                showToast('Rewards claimed!');
                checkArtBalance();
            } catch (error) {
                showToast('No rewards to claim or not an agent');
            }
        }

        function updateTokenUI() {
            if (ART_TOKEN_CONFIG.address) {
                document.getElementById('tokenAddress').textContent = ART_TOKEN_CONFIG.address;
            }
        }

        // Messaging Functions (simplified - same as previous implementation)
        async function loadConversations() {
            if (!xmtpClient) return;
            try {
                const convos = await xmtpClient.conversations.list();
                const container = document.getElementById('conversationsContainer');
                
                if (convos.length > 0) {
                    document.getElementById('conversationsList').classList.remove('hidden');
                    container.innerHTML = '';
                    convos.forEach(convo => {
                        const peerAddress = convo.peerAddress;
                        const div = document.createElement('div');
                        div.className = 'p-2 bg-neutral-100 rounded cursor-pointer hover:bg-neutral-200 text-xs';
                        div.textContent = `${peerAddress.slice(0, 6)}...${peerAddress.slice(-4)}`;
                        div.onclick = () => loadConversation(convo);
                        container.appendChild(div);
                        conversations.set(peerAddress, convo);
                    });
                }
            } catch (error) {
                console.error('Error loading conversations:', error);
            }
        }

        async function startNewConversation() {
            const address = prompt('Enter wallet address:');
            if (!address || !ethers.isAddress(address)) {
                showToast('Invalid address');
                return;
            }
            await startChatWithAddress(address);
        }

        async function startChatWithAddress(address) {
            try {
                const canMessage = await xmtpClient.canMessage(address);
                if (!canMessage) {
                    showToast('Address not on XMTP yet');
                    return;
                }

                const conversation = await xmtpClient.conversations.newConversation(address);
                conversations.set(address, conversation);
                currentConversation = conversation;
                
                document.getElementById('messagesContainer').innerHTML = '';
                document.getElementById('conversationsList').classList.remove('hidden');
                
                const container = document.getElementById('conversationsContainer');
                if (container.children[0]?.textContent === 'No conversations yet') {
                    container.innerHTML = '';
                }
                const div = document.createElement('div');
                div.className = 'p-2 bg-neutral-100 rounded cursor-pointer hover:bg-neutral-200 text-xs';
                div.textContent = `${address.slice(0, 6)}...${address.slice(-4)}`;
                div.onclick = () => loadConversation(conversation);
                container.appendChild(div);

                streamMessages(conversation);
                
            } catch (error) {
                showToast('Failed to start conversation');
            }
        }

        async function loadConversation(conversation) {
            currentConversation = conversation;
            document.getElementById('messagesContainer').innerHTML = '';
            
            try {
                const messages = await conversation.messages();
                messages.forEach(msg => displayMessage(msg));
                streamMessages(conversation);
            } catch (error) {
                console.error('Error loading messages:', error);
            }
        }

        async function streamMessages(conversation) {
            try {
                const stream = await conversation.streamMessages();
                for await (const message of stream) {
                    displayMessage(message);
                    
                    // Agent mode auto-response
                    if (agentMode && message.senderAddress !== walletAddress) {
                        await handleAgentResponse(message);
                    }
                }
            } catch (error) {
                console.error('Streaming error:', error);
            }
        }

        async function handleAgentResponse(message) {
            // Simple agent logic - can be expanded
            const content = message.content.toLowerCase();
            let response = null;
            
            if (content.includes('balance') || content.includes('art')) {
                if (artTokenContract) {
                    const balance = await artTokenContract.balanceOf(walletAddress);
                    response = `Your ART balance: ${ethers.formatUnits(balance, 18)} ART`;
                }
            } else if (content.includes('match') || content.includes('creator')) {
                response = "I can help match you with creators! What type of project are you working on?";
            } else if (content.includes('help') || content.includes('support')) {
                response = "I'm here to help! You can ask about: creator matching, payments, ART tokens, or technical support.";
            }
            
            if (response && currentConversation) {
                setTimeout(async () => {
                    await currentConversation.send(response);
                }, 1000);
            }
        }

        function displayMessage(message) {
            const container = document.getElementById('messagesContainer');
            const isSent = message.senderAddress === walletAddress;
            const isAgent = Object.values(AGENT_ADDRESSES).includes(message.senderAddress);
            
            const div = document.createElement('div');
            div.className = `chat-message ${isSent ? 'sent' : isAgent ? 'agent' : 'received'}`;
            
            const time = new Date(message.sent).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            
            div.innerHTML = `
                ${isAgent ? '<div class="sender">🤖 Agent</div>' : ''}
                <div>${message.content}</div>
                <div class="timestamp">${time}</div>
            `;
            
            container.appendChild(div);
            container.scrollTop = container.scrollHeight;
            
            messageHistory.push(message);
            document.getElementById('messageCount').textContent = `${messageHistory.length} messages`;
        }

        async function sendMessage() {
            const input = document.getElementById('messageInput');
            const text = input.value.trim();
            
            if (!text || !currentConversation) {
                showToast('No active conversation');
                return;
            }

            try {
                await currentConversation.send(text);
                input.value = '';
            } catch (error) {
                showToast('Failed to send');
            }
        }

        document.getElementById('messageInput')?.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });

        // Event Listeners
        if (window.ethereum) {
            window.ethereum.on('accountsChanged', (accounts) => {
                if (accounts.length === 0) {
                    walletAddress = null;
                    xmtpClient = null;
                    document.getElementById('connectWalletBtn').innerHTML = '<span>connect_wallet()</span>';
                    document.getElementById('connectWalletBtn').classList.remove('wallet-connected');
                    document.getElementById('walletStatus').textContent = 'Wallet: Not connected';
                    document.getElementById('initXmtpBtn').disabled = true;
                    showToast('Wallet disconnected');
                } else {
                    connectWallet();
                }
            });
            
            window.ethereum.on('chainChanged', () => window.location.reload());
        }

        // Touch optimizations
        document.querySelectorAll('a, button').forEach(el => {
            el.addEventListener('touchstart', function() { this.style.transform = 'scale(0.98)'; });
            el.addEventListener('touchend', function() { this.style.transform = ''; });
        });

        let lastTouchEnd = 0;
        document.addEventListener('touchend', function (event) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) event.preventDefault();
            lastTouchEnd = now;
        }, false);
    </script>
</body>
</html>
